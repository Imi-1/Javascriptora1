<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
          const lekeredez=new Promise((resolve, reject) => {
            setTimeout(() => {
                const autokID = [1, 2, 59, 4, 5];
                if(Math.random() > 0.5){
                    reject("Hiba tortent");
                }
                resolve(autokID);
            }, 1500);
        });

        const autolekerdez = function (autokID){
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    const auto ={
                        id:59,
                        marka:"Opel",
                        tipus:"Astra",
                        rendszam:"ABC-123",
                        evjarat:2005,
                        uzemanyag:"benzin"
                    };
                    if(Math.random() > 0.5){
                        reject("Nincs ilyen ID-jú autó");
                    }
                    resolve(auto);
                }, 1800);
            });
        };

        const autoByTipus = (tipus => new Promise((resolve, reject) => {
            setTimeout(() => {
                const auto =[{
                    id:59,
                    marka:"Opel",
                    tipus:"Astra",
                    rendszam:"ABC-123",
                    evjarat:2005,
                    uzemanyag:"benzin"
                },
                {
                    id:1,
                    marka:"Opel",
                    tipus:"Astra",
                    rendszam:"ABC-123",
                    evjarat:2005,
                    uzemanyag:"benzin"
                },
                {
                    id:59,
                    marka:"Opel",
                    tipus:"Astra",
                    rendszam:"ABC-321",
                    evjarat:2012,
                    uzemanyag:"benzin"
                },];
                if (Math.random() > 0.5){
                    reject("Nincs ilyen tipusú autó");
                }
            }, 1500);
        }));

        console.log(lekeredez);
        lekeredez
        .then((autokID) => {
            console.log(autokID);
            return autolekerdez(autokID[2]);
        })
        .then( (auto) => {
            console.log(auto);
            return autoByTipus(auto.tipus);
        })
        .then( (auto) => {
            console.log(auto);
        })
        .catch( (err) => {
            console.log(err);
        })
        .finally( () => {
            console.log("A lekérdezés lefutott");
        });


        async function lekerdezesek(){
            const autok =await autolekerdez();
            console.log(autok);
        }
        lekerdezesek();
    </script>
</body>
</html>